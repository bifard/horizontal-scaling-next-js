# üé≠ –≠–º—É–ª—è—Ü–∏—è GitHub Actions –ª–æ–∫–∞–ª—å–Ω–æ

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ `act`

`act` - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ GitHub Actions workflows.

### macOS (Homebrew)

```bash
brew install act
```

### Linux

```bash
curl https://raw.githubusercontent.com/nektos/act/master/install.sh | sudo bash
```

### –ò–ª–∏ —á–µ—Ä–µ–∑ Docker

```bash
alias act="docker run --rm -it -v /var/run/docker.sock:/var/run/docker.sock -v $(pwd):/workspace -w /workspace nektos/act"
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö jobs

```bash
act -l
```

### –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ workflow

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å workflow –ø—Ä–∏ push (—Å —Ç–µ–≥–æ–º)
act push

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å —Ä—É—á–Ω—ã–º —Ç—Ä–∏–≥–≥–µ—Ä–æ–º
act workflow_dispatch
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ job

```bash
# –¢–æ–ª—å–∫–æ —Å–±–æ—Ä–∫–∞
act -j build

# –¢–æ–ª—å–∫–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
act -j extract-static

# –¢–æ–ª—å–∫–æ –¥–µ–ø–ª–æ–π
act -j deploy
```

### –ó–∞–ø—É—Å–∫ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
act workflow_dispatch \
  -s APP_PORT_LOCAL=3002 \
  -s NGINX_PORT=8080
```

### –ó–∞–ø—É—Å–∫ —Å –≤—Ö–æ–¥–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```bash
act workflow_dispatch \
  --input app_port=3002 \
  --input nginx_port=8080
```

### –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏

```bash
# –î–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
act -v

# –û—á–µ–Ω—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
act -vv

# –ó–∞–ø—É—Å–∫ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º shell –ø—Ä–∏ –æ—à–∏–±–∫–µ
act --shell
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ `.actrc` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

```bash
cat > .actrc << 'EOF'
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–∏–µ –æ–±—Ä–∞–∑—ã (–±–ª–∏–∂–µ –∫ –Ω–∞—Å—Ç–æ—è—â–µ–º—É GitHub Actions)
-P ubuntu-latest=catthehacker/ubuntu:full-latest

# –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
-v
EOF
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ secrets

```bash
# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏
cat > .secrets << 'EOF'
DOCKER_USERNAME=myuser
DOCKER_PASSWORD=mypassword
SSH_KEY=my-ssh-key
EOF

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å —Å–µ–∫—Ä–µ—Ç–∞–º–∏
act -s-file .secrets
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
cat > .env << 'EOF'
APP_PORT_LOCAL=3001
NGINX_PORT=3000
STACK_NAME=app
EOF

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å env —Ñ–∞–π–ª–æ–º
act --env-file .env
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å workflow
act -l

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å–±–æ—Ä–∫—É
act -j build

# 3. –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ - –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–µ—Å—å workflow
act push
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```bash
# –¢–µ—Å—Ç —Å –ø–æ—Ä—Ç–æ–º 3002
act workflow_dispatch --input app_port=3002

# –¢–µ—Å—Ç —Å –¥—Ä—É–≥–∏–º —Å—Ç–µ–∫–æ–º
STACK_NAME=test-app act push
```

### Dry-run (–ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)

```bash
act -n
```

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è `act`

1. **–ù–µ –≤—Å–µ Actions –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è** - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ actions –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏–Ω–∞—á–µ
2. **–ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã** - –∑–∞–≥—Ä—É–∑–∫–∞/—Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
3. **–°–µ–∫—Ä–µ—Ç—ã** - –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ `.secrets`
4. **–ú–∞—Ç—Ä–∏—á–Ω—ã–µ –±–∏–ª–¥—ã** - –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ
5. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–Ω–∞—á–µ —á–µ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º GitHub

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π workflow –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞–ø—Ä—è–º—É—é
./build.sh
./extract-static.sh
./deploy.sh

# 2. –ö–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç - —Ç–µ—Å—Ç–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ act
act -j build

# 3. –ï—Å–ª–∏ build —É—Å–ø–µ—à–µ–Ω - —Ç–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª
act push

# 4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ - –ø—É—à–∏–º –≤ GitHub
git add .
git commit -m "feat: update deployment"
git push
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å Docker

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Docker socket
ls -la /var/run/docker.sock

# –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤
sudo chmod 666 /var/run/docker.sock
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –æ–±—Ä–∞–∑–∞–º–∏

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –ª–µ–≥–∫–∏–π –æ–±—Ä–∞–∑ (–±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –º–µ–Ω—å—à–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤)
act -P ubuntu-latest=node:18

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –æ–±—Ä–∞–∑ (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –±–ª–∏–∂–µ –∫ GitHub)
act -P ubuntu-latest=catthehacker/ubuntu:full-latest
```

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
act -v > act.log 2>&1

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —à–∞–≥
act -j build --step "Build Docker image"
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: act vs —Ä–µ–∞–ª—å–Ω—ã–π GitHub Actions

| –ê—Å–ø–µ–∫—Ç    | act (–ª–æ–∫–∞–ª—å–Ω–æ)      | GitHub Actions         |
| --------- | ------------------- | ---------------------- |
| –°–∫–æ—Ä–æ—Å—Ç—å  | ‚ö° –ë—ã—Å—Ç—Ä–µ–µ          | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (cold start) |
| –û–∫—Ä—É–∂–µ–Ω–∏–µ | –í–∞—à–∞ –º–∞—à–∏–Ω–∞         | GitHub runners         |
| –°–µ–∫—Ä–µ—Ç—ã   | –õ–æ–∫–∞–ª—å–Ω—ã–π .secrets  | GitHub Secrets         |
| –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã | –õ–æ–∫–∞–ª—å–Ω–∞—è FS        | GitHub Storage         |
| –ö—ç—à       | Docker cache        | GitHub Cache           |
| –°—Ç–æ–∏–º–æ—Å—Ç—å | ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ        | –ú–∏–Ω—É—Ç—ã –ª–∏–º–∏—Ç–∞          |
| –û—Ç–ª–∞–¥–∫–∞   | ‚≠ê –ü—Ä–æ—â–µ (–ª–æ–∫–∞–ª—å–Ω–æ) | –°–ª–æ–∂–Ω–µ–µ                |

## üéì Best Practices

1. **–†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ** - –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –≤ act, —Ç–∞–∫ –∏ –æ—Ç–¥–µ–ª—å–Ω–æ
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ act** - –ø–µ—Ä–µ–¥ –ø—É—à–µ–º –≤ GitHub
4. **–î–µ—Ä–∂–∏—Ç–µ workflow –ø—Ä–æ—Å—Ç—ã–º–∏** - —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö, –Ω–µ –≤ yaml
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã** - –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É jobs

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [act GitHub](https://github.com/nektos/act)
- [act –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://nektosact.com/)
- [GitHub Actions –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.github.com/en/actions)
- [–ü—Ä–∏–º–µ—Ä—ã workflows](https://github.com/actions/starter-workflows)
